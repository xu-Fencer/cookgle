# API 文档

## Todo list
- [x] 搜索
- [ ] 获取菜谱详情
- [ ] 点赞菜谱
- [ ] 收藏菜谱
- [ ] 首页 - 随机推荐菜谱
- [ ] 上传文章
- [ ] 广场 - 随机推荐文章
- [ ] 广场 - 获取文章详情
- [ ] 用户 - 登陆
- [ ] 用户 - 查看信息
- [ ] 用户 - 更改信息
- [ ] 用户 - 查看个人文章
- [ ] 用户 - 查看收藏列表
- [ ] 用户 - 设置口味偏好
- [ ] 识图 - 连接coze识别

---


## `search_name`

| 字段            | 说明                                                         |
| --------------- | ------------------------------------------------------------ |
| **接口地址**    | `/api/search_name`                                           |
| **请求方法**    | `GET`                                                        |
| **功能概要**    | 根据菜谱名称关键字模糊查询菜谱。                             |
| **详细描述**    | 对 `recipes1.name` 做不区分大小写的 `LIKE` 查询，返回匹配的菜谱核心信息，可用于搜索框自动补全或全站搜索。 |
| **是否鉴权**    | 无（公开接口）                                               |
| **请求参数**    | `name` · *string* · **必填** · 关键字，至少 1 个字符         |
| **请求体**      | *无*                                                         |
| **成功响应**    | `HTTP 200 OK` – 返回对象数组                                 |
| 响应体          | `json\n[\n  {\n    \"id\": 42,\n    \"name\": \"番茄炒蛋\",\n    \"description\": \"经典快手家常菜…\",\n    \"image_path\": \"/imgs/tomato_egg.jpg\",\n    \"category\": \"家常菜\"\n  }\n]\n` |
| **错误响应**    | \* `400 Bad Request` – 缺少或为空 `name` 参数<br>\* `500 Internal Server Error` – 数据库异常 |
| **示例 cURL**   | `bash$curl -G "http://localhost:5501/api/search_name" --data-urlencode "name=番茄"` |
| **备注 / 提示** | \* 未分页，结果集过大时需前端自行处理。<br>\* 后端使用 `.env` 注入数据库配置，驱动为 `mysql-connector-python`，默认支持 `caching_sha2_password`。 |

---


## API 文档模板

| 字段                | 说明                          |
| ----------------- | --------------------------- |
| **接口地址**          | `/api/<route>`              |
| **请求方法**          | `GET` / `POST` / …          |
| **功能概要**          | 用一句话概括接口作用                  |
| **详细描述**          | 业务背景、典型场景、特殊规则              |
| **是否鉴权**          | `无` / `Bearer <token>` / …  |
| **请求参数（路径 / 查询）** | `参数名` · *类型* · **必填?** · 说明 |
| **请求体（如有）**       | JSON 示例或字段说明                |
| **成功响应**          | `HTTP <code>` – 意义          |
|   响应体             | 代码块中给出 JSON 示例              |
| **错误响应**          | 常见错误码、错误信息及触发条件             |
| **示例 cURL**       | 一条可以直接运行的命令                 |
| **备注 / 提示**       | 分页、速率限制、安全注意事项等             |

> **统一约定**
>
> * 字段使用 snake\_case。
> * 所有时间均为 ISO-8601 UTC（除非另行说明）。
> * 成功/失败均返回 `Content-Type: application/json; charset=utf-8`。
> * 错误格式固定为：`{ "error": "可读的错误信息" }`。

---

### 使用说明

1. 复制“API 文档模板”表格。
2. 填写/修改各字段；删除无用行（如纯 GET 接口可去掉“请求体”行）。
3. 将示例 JSON 保持最小可用但完整，方便前端快速接入。
4. 把文档文件（如 `api_docs.md`）与代码一并纳入版本管理，确保同步更新。
